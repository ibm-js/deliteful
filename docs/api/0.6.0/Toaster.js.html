<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: deliteful/Toaster.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <style>
        [inherited] {
            display: none;
        }

        [inherited-show] {
            display: block;
        }
    </style>
    <script>
        function toggleInherited(event) {
            var shouldShow = event.type !== "DOMContentLoaded" && !document.querySelector("[inherited][inherited-show]");
            Array.prototype.forEach.call(document.querySelectorAll("dl"), function (elem) {
                var inherited = elem.querySelectorAll("[inherited]");
                Array.prototype.forEach.call(inherited, function (elem) {
                    if (shouldShow) {
                        elem.setAttribute("inherited-show", "");
                    } else {
                        elem.removeAttribute("inherited-show");
                    }
                });
                if (inherited.length > 0) {
                    var header = elem.previousElementSibling;
                    if (header.tagName === "H3") {
                        header.style.display = parseInt(document.defaultView.getComputedStyle(elem).height) > 0 ? "" : "none";
                    }
                }
            });
            if (event.type !== "DOMContentLoaded") {
                event.target.innerHTML = (shouldShow ? "Hide" : "Show") + " inherited";
            } else if (!document.querySelector("[inherited]")) {
                var toggleLink = document.getElementById("toggleinherited");
                if (toggleLink) {
                    toggleLink.style.display = "none";
                }
            }
        }
        window.addEventListener("DOMContentLoaded", toggleInherited);
    </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: deliteful/Toaster.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module deliteful/Toaster */
define(["dcl/dcl",
	"delite/Widget",
	"delite/register",
	"decor/sniff",
	"delite/handlebars!./Toaster/Toaster.html",
	"./ToasterMessage",
	"delite/theme!./Toaster/themes/{{theme}}/Toaster.css"
	], function (dcl, Widget, register, has, template, ToasterMessage) {

		/* helpers */
		function isRemovable(m) {return m._toBeRemoved &amp;&amp; (! m._isRemoved); }

		var Toaster = dcl(Widget, /** @lends module:deliteful/Toaster */ {

			/**
			 * Toaster widget. Displays instances of `ToasterMessage`.
			 *
			 * Messages are posted through `postMessage`, which takes either
			 * a full `ToasterMessage` instance or a message as a string.
			 *
			 * `ToasterMessage` instances are displayed for a finite or infinite duration.
			 * (see the `duration` property of `ToasterMessage`).
			 *
			 * @class module:deliteful/Toaster
			 * @augments delite/Widget
			 * @example
			 *   &lt;d-toaster id="t">&lt;/d-toaster>
			 *   &lt;d-button onclick="t.postMessage('button clicked', {duration: 1000})">...&lt;/d-button>
			 */

			_wrapper: null,

			baseClass: "d-toaster",

			/**
			 * The name of the CSS class that specifies the placement of
			 * toaster's messages.
			 *
			 * The toaster comes with 7 classes which can be used out-of-the-box.
			 *  - `d-toaster-placement-default` for the default position
			 *  - `d-toaster-placement-tl` for top-left
			 *  - `d-toaster-placement-tc` for top-center
			 *  - `d-toaster-placement-tr` for top-right
			 *  - `d-toaster-placement-bl` for bottom-left
			 *  - `d-toaster-placement-bc` for bottom-center
			 *  - `d-toaster-placement-br` for bottom-right
			 *
			 * This property can be set to any string as long as it references
			 * the name of a CSS class properly defined.
			 *
			 * @member {string}
			 * @default `d-toaster-placement-default`
			 */
			placementClass: "d-toaster-placement-default",

			/**
			 * A list containing all `ToasterMessage` instances posted.
			 * @member {module:deliteful/ToasterMessage[]}
			 * @default null
			 */
			messages: null,

			/**
			 * If `true`, the messages are displayed bottom to top.
			 * @member {boolean}
			 * @default false
			 */
			invertOrder: false,

			/**
			 * A CSS class which is added to each message inserted in the DOM without being visible yet.
			 *
			 * It is toggled to `animationEnterClass`.
			 * This class is useful when you want to set an initial state for `animationEnterClass`.
			 *
			 * @member {string}
			 * @default "d-toaster-initial"
			 */
			animationInitialClass: "d-toaster-initial",

			/**
			 * A CSS class which is inserted to make the message visible in DOM (ex: a fade-in CSS transition).
			 * It is removed as soon as the animation has completed.
			 *
			 * If no `transitionend` or `animationend` event is heard, this class is never removed.
			 *
			 * @member {string}
			 * @default "d-toaster-fadein"
			 */
			animationEnterClass: "d-toaster-fadein",

			/**
			 * A CSS class which is inserted to make the message invisible in DOM (ex: a fade-out CSS transition).
			 * It is toggled to `animationQuitClass` when the animation has completed.
			 *
			 * If no `transitionend` or `animationend` event is heard, this class is never removed.
			 *
			 * @member {string}
			 * @default "d-toaster-fadeout"
			 */
			animationQuitClass: "d-toaster-fadeout",

			/**
			 * A CSS class which is inserted after `animationQuitClass` has completed.
			 *
			 * If no `transitionend` or `animationend` event is heard, this class is never inserted.
			 *
			 * @member {string}
			 * @default "d-toaster-fadefinish"
			 */
			animationEndClass: "d-toaster-fadefinish",

			_emitExpiration: function (m) {
				this.emit("messageExpired", {message: m}); // TODO: shouldn't a event be named lowercase?
			},
			_emitInsertion: function (m) {
				this.emit("messageInserted", {message: m});
			},
			_emitRemoval: function (m) {
				this.emit("messageRemoved", {message: m});
			},
			_getRemovableMsg: function () {
				return this.messages.filter(isRemovable);
			},
			_allExpAreRemovable: function () {
				for (var i = 0, l = this.messages.length; i &lt; l; i++) {
					var m = this.messages[i];
					if (m.isExpirable()) {
						if (!isRemovable(m)) { return false; }
					}
				}
				return true;
			},

			template: template,

			refreshRendering: function (props) {
				if ("messages" in props) {
					this.messages.forEach(function (m) {
						if (!m._isInserted) {
							m._insertInDom(this, true);
							m._showInDom(this, true);
							this._emitInsertion(m);
						} else if (m.isExpirable() &amp;&amp; m._hasExpired &amp;&amp; (!m._toBeRemoved)) {
							m._hideInDom(this, true);
							this._emitExpiration(m);
						}
					}, this);
					if (this._allExpAreRemovable()) {
						this._getRemovableMsg().forEach(function (m) {
							m._removeFromDom(this, true);
							m.destroy();
							this.messages.splice(this.messages.indexOf(m), 1);
							this._emitRemoval(m);
						}, this);
					}
				}
			},

			preRender: function () {
				this.messages = [];
			},
			postRender: function () {
				// NOTE: the following a11y attributes are needed for JAWS but
				// break VoiceOver
				if (!has("ios")) {
					this.setAttribute("aria-atomic", "true");
					this.setAttribute("role", "alert");
				}
			},
			/**
			 * Posts a message in the toaster.
			 *
			 * The message can be either a full `ToasterMessage` instance or
			 * a simple string, in which case the proprieties of the message
			 * are specified through the `props` argument which is passed to the
			 * `ToasterMessage` constructor.
			 *
			 * @param {string|module:deliteful/ToasterMessage} message Either the content of the
			 * message as a string or an instance of `deliteful/ToasterMessage`.
			 * @param {Object} [props] A hash used to initialize a message instance (only relevant 
			 * when `message` passed is a string).
			 *
			 * @returns {module:deliteful/ToasterMessage} The message instance passed as a parameter
			 * or created from the string.
			 */
			postMessage: function (message, props) {
				var m;
				if (typeof(message) === "string") {
					var args = {message: message};
					dcl.mix(args, props);
					m = new ToasterMessage(args);
				} else {
					m = message;
				}
				return this._addMessage(m);
			},
			_addMessage: function (m) {
				this.messages.push(m);
				this.notifyCurrentValue("messages");
				return m;
			}
		});
		return register("d-toaster", [HTMLElement, Toaster]);
	});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="deliteful/Button.html">deliteful/Button</a></li><li><a href="deliteful/channelBreakpoints.html">deliteful/channelBreakpoints</a></li><li><a href="deliteful/Checkbox.html">deliteful/Checkbox</a></li><li><a href="deliteful/Combobox.html">deliteful/Combobox</a></li><li><a href="deliteful/Combobox/ComboPopup.html">deliteful/Combobox/ComboPopup</a></li><li><a href="deliteful/features.html">deliteful/features</a></li><li><a href="deliteful/LinearLayout.html">deliteful/LinearLayout</a></li><li><a href="deliteful/list/CategoryRenderer.html">deliteful/list/CategoryRenderer</a></li><li><a href="deliteful/list/ItemRenderer.html">deliteful/list/ItemRenderer</a></li><li><a href="deliteful/list/List.html">deliteful/list/List</a></li><li><a href="deliteful/list/PageableList.html">deliteful/list/PageableList</a></li><li><a href="deliteful/list/Renderer.html">deliteful/list/Renderer</a></li><li><a href="deliteful/ProgressBar.html">deliteful/ProgressBar</a></li><li><a href="deliteful/ProgressIndicator.html">deliteful/ProgressIndicator</a></li><li><a href="deliteful/RadioButton.html">deliteful/RadioButton</a></li><li><a href="deliteful/ResponsiveColumns.html">deliteful/ResponsiveColumns</a></li><li><a href="deliteful/ScrollableContainer.html">deliteful/ScrollableContainer</a></li><li><a href="deliteful/Select.html">deliteful/Select</a></li><li><a href="deliteful/SidePane.html">deliteful/SidePane</a></li><li><a href="deliteful/Slider.html">deliteful/Slider</a></li><li><a href="deliteful/StarRating.html">deliteful/StarRating</a></li><li><a href="deliteful/Store.html">deliteful/Store</a></li><li><a href="deliteful/SwapView.html">deliteful/SwapView</a></li><li><a href="deliteful/Switch.html">deliteful/Switch</a></li><li><a href="deliteful/Toaster.html">deliteful/Toaster</a></li><li><a href="deliteful/ToasterMessage.html">deliteful/ToasterMessage</a></li><li><a href="deliteful/Toggle.html">deliteful/Toggle</a></li><li><a href="deliteful/ToggleButton.html">deliteful/ToggleButton</a></li><li><a href="deliteful/ViewIndicator.html">deliteful/ViewIndicator</a></li><li><a href="deliteful/ViewStack.html">deliteful/ViewStack</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha7</a> on Fri Feb 06 2015 17:49:04 GMT+0100 (Romance Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
