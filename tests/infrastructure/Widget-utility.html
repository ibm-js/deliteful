<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>dui/Widget Utility Functions Unit Test</title>
	<script type="text/javascript" src="../boilerplate.js"></script>

	<script type="text/javascript">
		require([
			"doh/runner",
			"dojo/dom", "dojo/parser", "dojo/_base/window",
			"dui/register", "dui/Widget",
			"dojo/domReady!"
		], function (doh, dom, parser, win, register, Widget) {

			register("test-foo", [HTMLElement, Widget], {
				name: "",
				attr1: 0,
				attr2: 0
			});

			register("test-bar", [HTMLElement, Widget], {
				name: "",
				attr1: 0,
				attr2: 0
			});

			register("test-baz", [HTMLElement, Widget], {
				name: "",
				attr1: 1,
				attr2: 1
			});

			doh.register("parse", function () {
				register.parse();
			});

			doh.register("util", [
				function getEnclosingWidget() {
					doh.is(null, Widget.prototype.getEnclosingWidget(dom.byId("not-a-widget")), "not-a-widget");
					doh.is("your", Widget.prototype.getEnclosingWidget(dom.byId("three")).name, "three");
					doh.is("your", Widget.prototype.getEnclosingWidget(dom.byId("three.one")).name, "three.one");
					doh.is("your", Widget.prototype.getEnclosingWidget(dom.byId("three.one.one")).name, "three.one.one");
				},
				function findWidgets() {
					doh.is(3, Widget.prototype.findWidgets(win.body()).length);
					doh.is(1, Widget.prototype.findWidgets(dom.byId("threeWrapper")).length);
				}
			]);

			doh.run();
		});

	</script>
</head>
<body>
<h1>dui/Widget Utility Functions Unit Test</h1>
<test-foo id="one" name="bob" attr1=10 attr2=10></test-foo>
<test-foo id="two" name="is" attr1=5 attr2=10></test-foo>
<div id="threeWrapper">
	<test-bar id="three" name="your" attr1=5 attr2=5>
		<div id="three.one">
			<div id="three.one.one"></div>
			<test-bar id="four" name="uncle" attr1=10 attr2=5></test-bar>
		</div>
	</test-bar>
</div>
<div id="not-a-widget"></div>
</body>
</html>
